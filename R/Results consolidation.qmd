---
title: "Results consolidation"
format: html
editor: visual
---

```{r}
library(tidyverse)

### Consolidate results into grouped files

## Habitat Association results

# Habitat Associations

HA <- list.files(path = "Results/Habitat Associations/", pattern = "_Habitat_Associations.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(HA, "Kestrel_Habitat_Associations.csv")

#Model metrics
mod_metrics <- list.files(path = "Results/Habitat Associations/", pattern = "_metrics.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(mod_metrics, "Kestrel_HA_model_metrics.csv")

#Partial dependence results
partial_dependence <- list.files(path = "Results/Habitat Associations/", pattern = "_partial_dependence.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(partial_dependence, "Ketrel_HA_partial_dependence.csv")

#Predictor importance
predictor_importance <- list.files(path = "Results/Habitat Associations/", pattern = "_predictor_importance.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(predictor_importance, "Kestrel_HA_predictor_importance.csv")

## Occupancy results

#model summary
Occ_model_summary <- list.files(path = "Results/Occupancy models/", pattern = "_model_summary.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(Occ_model_summary, "Kestrel_Occupancy_model_summary.csv")

#Goodness of fit
Occ_model_GOF <- list.files(path = "Results/Occupancy models/", pattern = "_GOF.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(Occ_model_GOF, "Kestrel_Occupancy_goodness_of_fit.csv")

# Spatiotemporal model stats
Occ_model_st_stats <- list.files(path = "Results/Occupancy models/", pattern = "_st_stats.csv", full.names = T) |>  
  map(read_csv) |> 
  list_rbind()

write_csv(Occ_model_st_stats, "Kestrel_Occupancy_Spatiotemporal_model_results.csv")
```
